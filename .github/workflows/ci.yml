name: Release
# A workflow run is made up of one or more jobs that can run sequentially or in parallel
on:
  push:
    branches:
      - main
jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: npm i -g pnpm
      - run: pnpx zardoy-release empty --skip-github
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        id: release
      - run: echo "${{ toJson(steps.release.outputs) }}"
      # - run: echo '${{ toJson(steps.release.outputs) }}' > release.json
      - run: echo "SHORT_SHA=$(git rev-parse --short $GITHUB_SHA)" >> $GITHUB_ENV
      - run: echo '{"latestTag": "${{ env.SHORT_SHA }}"}' > release.json
      - run: cat release.json
